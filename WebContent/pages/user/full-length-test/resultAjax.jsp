<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    
  <%@taglib prefix="s" uri="/struts-tags" %>
 <html>
<head>
 
<link rel="stylesheet" href="assets/css/practice.css" type="text/css" />    
  
  <!--Customised Css for review module-->
  <link rel="stylesheet" href="assets/css/review.css" type="text/css" /> 
  
    <!--[if lt IE 9]>
    <script src="js/ie/html5shiv.js"></script>
    <script src="js/ie/respond.min.js"></script>
    <script src="js/ie/excanvas.js"></script>
  <![endif]-->
  <!-- PAGE LEVEL SCRIPTS -->
 
<link rel="stylesheet" href="assets/css/custom.css" type="text/css" />
<!-- <link rel="stylesheet" href="js/filter-dataTable/css/demo_table.css" type="text/css" />
<link rel="stylesheet" href="js/filter-dataTable/css/themes/base/jquery-ui.css" type="text/css" />
<link rel="stylesheet" href="js/filter-dataTable/css/themes/smoothness/jquery-ui-1.7.2.custom.css" type="text/css" /> -->
<link rel="stylesheet" href="assets/js/datatables/datatables.css" type="text/css" /> 
<link rel="stylesheet" href="assets/css/skill_data/jquery.dataTables.css" type="text/css" />
<!--<link rel="stylesheet" href="js/filter-dataTable/css/demo_table.css" type="text/css" />
<link rel="stylesheet" href="js/filter-dataTable/css/themes/base/jquery-ui.css" type="text/css" />-->
<!--<link rel="stylesheet" href="js/filter-dataTable/css/themes/smoothness/jquery-ui-1.7.2.custom.css" type="text/css" />-->

<style>

.lesson-content p{font-family:Verdana, Arial, sans-serif; font-size:15px; padding-left:40px; padding-right:40px;}

@media screen and (max-width:1024px) {										 									 
									 .font-15{font-size:14px;}									
									}

@media screen and (max-width:800px) {										 
									 .lesson-content p{font-family:Verdana, Arial, sans-serif; font-size:15px; padding-left:5px; padding-right:5px;}
									 .font-15{font-size:13px;}									
									}

</style>

 <script src="assets/js/jquery.min.js"></script>
 <script src="assets/js/highcharts.js"></script>
	<script type="text/javascript">

	$(document).ready(function(){ 		
		
		
		
		alert("DOC START");
		 var foo = '[' + $('#resultJson').val() + ']';
		 alert("FOO : "+foo);
		 var values = JSON.parse(foo);
		  alert(values);
		
     var table = $('#expandable-table').DataTable( {
     "data": values
     
     /* ajax:"ResultAction.action"  */,
        "columns": [
            {
                "class":          'details-control',
                "orderable":      false,
                "data":           null,
                "defaultContent": ''
            },
            { "data": "result" },
            { "data": "quesTitle" },
            { "data": "topic" },
            { "data": "type" },
            { "data": "difficulty" },
            { "data": "guessed" },
            { "data": "flag" },
            { "data": "date" },
            { "data": "retry" },
            { "data": "reason" }
        ],                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
        "order": [[1, 'asc']]
    } );                                                                                                                              
     
    // Add event listener for opening and closing details
    $('#expandable-table tbody').on('click', 'td.details-control', function () {
        var tr = $(this).closest('tr');
        var row = table.row( tr );
 
        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Open this row
            row.child( format(row.data()) ).show();
            tr.addClass('shown');
        }
    } );
	
	//$('#expandable-table_length,#expandable-table_filter').hide();
	
    $('#expandable-table').dataTable().columnFilter({
        aoColumns: [ null,{ type: "select", values: [ 'Correct', 'Wrong'], selected: ''  },{ type: "text" },{ type: "text" },{ type: "number" },{ type: "text" }, { type: "select", values: [ 'CONFIDENT', 'GUESS'], selected: ''  },
            { type: "select", values: [ 'UNFLAG', 'FLAG'], selected: ''  },null,null
		   ]
	 });
		
	});
	
	
	
	
	function format ( d ) {
		var his = d.hisdiv.replace(/@/g, '\"');
		
		
		var result = "<i class='fa fa-2x fa-check-circle text-success'></i> <span class='h3 text-success p-l-10'>"+d.result+"</span>";
		if(d.result=="Wrong") 
			result = "<i class='fa fa-2x fa-times-circle text-danger'></i> <span class='h3 text-danger p-l-10'>"+d.result+"</span>";
	//	alert(his);
			return 
			'<div class="row" style="padding:12px;>'+
		    '<div class="col-xs-12">'+
			'<div class="col-xs-12"><span class="text-dkr"><h4 class="m-t-0">'+d.section_name+' / '+d.category_name+' / Difficulty : '+d.difficulty+'</h4></span> </div>'+
			'<div class="col-xs-12"><span class="font-15 text-dkr">You have answered this question</span> </div>'+
            '<div class="col-lg-8 col-sm-8 col-xs-12">'+
			'<hr><div class="row p-b-10"> <div class="col-xs-6">'+result+''+
			'<p class="font-15 m-t-5">You are among <span class="font-bold text-success">'+d.percentCorrect+'%</span> people who got this question correct</p></div> '+
			' <div class="col-xs-6"><i class="fa fa-2x fa-clock-o text-primary"></i> <span class="h3 text-primary p-l-10">'+d.user_time+' </span> <p class="font-15 m-t-5">Your pace is better than others pace: <span class="font-bold text-primary">'+d.avg_time+'</span></p></div> </div> '+
			'<hr class="hr-less">'+
			' <div class="row p-t-10"> <div class="col-xs-12"> <span class="col-xs-4 font-15"> <span class="font-bold text-success p-r-10">'+d.guessPercentage+'%</span> Guessed</span>'+ '<span class="col-xs-4 font-15 "> <span class="font-bold text-success p-l-10 p-r-10">'+d.guessIncorrectPercentage+'%</span> Guessed Incorrectly</span>'+'<span class="col-xs-4 font-15"> <span class="font-bold text-success p-l-10 p-r-10">'+d.flaggedPercentage+'%</span> Flagged</span></div></div>'+
			'</div>'+			
			'<div class="col-lg-4 col-sm-4 col-xs-12 text-primary">'+ 
			'<hr> <p class="h4 m-t-15">Question attempt history</p>'+
			'<hr class="hr-less">'+his+'</div>'
			;
		}
	

		
 
       
   
	
	
	

	//Reason Update
	 function reason(userid,qid,testid,reasonid)
	 {
		alert('Reson Iam Userid:'+userid+' ,QID: '+qid+', Tesno: '+testid+' ,RID : '+reasonid); 
		var urlt = 'updateReason.action?userid='+userid+'&qid='+qid+'&testid='+testid+'&reasonid='+reasonid;
		alert('URL : '+urlt);
		 $.ajax({
				type : 'POST',
				url : urlt,
							
			    success :function(result){
			    	$("#demo").html(result);
			    alert("Ok"+result);
			    },
				error : function(e){	
				alert('Error'+e);
				}
			    
			}); 
		
	 }
	
  </script>
		
 </head>

       
		 <!--Data table Start -->   		
            	<div id="demo">

                            <section class="panel panel-default">
                                <header class="panel-heading">
                                  DataTables 
                                  <i class="fa fa-info-sign text-muted" data-toggle="tooltip" data-placement="bottom" ></i> 
                                </header>
                               <div class="table-responsive">
                                <table id="expandable-table" class="table table-striped display" cellspacing="0" width="100%">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>Result</th>
                                                <th>Question Title</th>
                                                <th>Topic</th>
                                                <th>Type</th>
												<th>Difficulty</th>
												<th>Guessed</th>
												<th>Flag</th>
												<th>Date</th>
												<th>Retry</th>
												<th>Reason</th>
                                            </tr>
                                        </thead>
                                 
                                        <tfoot>
                                            <tr>
                                                <th></th>
                                                <th>Result</th>
                                                <th>Question Title</th>
                                                <th>Topic</th>
                                                <th>Type</th>
												<th></th>
												<th></th>
												<th></th>
												<th></th>
												<th></th>
												<th></th>
                                            </tr>
                                        </tfoot>
                                    </table>
						</div>
						</section>	
                        </div>
          
				<!--Data table End -->          
   
  <script src="assets/js/filter-dataTable/jquery.dataTables.js"></script>

<script src="assets/js/filter-dataTable/jquery.dataTables.columnFilter.js"></script>
 

	